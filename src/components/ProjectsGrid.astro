---
import { Image } from 'astro:assets';
import knowldgePortfolioImage from '../../algorithms.png';
import Card from './Card.astro';
---

<div class="grid grid-cols-4">
	<!-- Colors: https://tailwindcss.com/docs/customizing-colors -->
	<Card
		href="/project1"
		title="Knowledge Portfolio"
		description="Test Description"
		stackList="Next.js 12, Supabase, Styled Components"
		img="../algorithms.png"
		position="even"
		index="1"
		stackBgColor="bg-cyan-400"
	/>
	<Card
		href="/projects/project-1"
		title="Knowledge Portfolio"
		description="Test Description"
		stackList=""
		img="../algorithms.png"
		position="odd"
		index="2"
		stackList="Next.js 12, Supabase, Styled Components"
		stackBgColor="bg-fuchsia-400"
	/>
	<Card
		href="/projects/project-1"
		title="Knowledge Portfolio"
		description="Test Description"
		stackList=""
		img="../algorithms.png"
		position="even"
		index="2"
		stackList="Next.js 12, Supabase, Styled Components"
		stackBgColor="bg-fuchsia-400"
	/>
</div>

<script>
	// https://codepen.io/GreenSock/pen/BarWPyB
	import { gsap } from 'gsap';
	import { ScrollTrigger } from 'gsap/ScrollTrigger';

	gsap.registerPlugin(ScrollTrigger);

	const cards = document.querySelectorAll('.card');

	const staggerAmount = 50;

	cards.forEach((card, index) => {
		ScrollTrigger.create({
			onUpdate({ progress }) {
				if (index > 0) {
					const newY =
						-progress * Number(`${index}00`) +
						index * staggerAmount;

					console.log(newY, index);
					gsap.to(card, {
						duration: 0,
						y: newY,
					});
				}
			},
		});
	});
</script>
